---
title: ‡∏¢‡πâ‡∏≤‡∏¢ 3rd-party script ‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô web worker ‡∏î‡πâ‡∏ß‡∏¢ partytown
description: analytics tools ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠ track user ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà block main thread ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ä‡πâ‡∏≤‡∏•‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏¢‡πâ‡∏≤‡∏¢ 3rd-party script ‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô web worker ‡∏î‡πâ‡∏ß‡∏¢ partytown
date: 2023-09-04T03:56:42.534Z
preview: ./partytown.svg
draft: false
tags:
  - partytown
  - web worker
  - analytics
  - performance
categories: null
lastmod: 2023-09-04T03:56:42.534Z
---

analytics tools ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠ track user ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà block main thread ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏ä‡πâ‡∏≤‡∏•‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏¢‡πâ‡∏≤‡∏¢ 3rd-party script ‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô web worker ‡∏î‡πâ‡∏ß‡∏¢ partytown

## partytown ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á

[‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Ç‡∏≠‡∏á partytown ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢](https://partytown.builder.io/how-does-partytown-work)

‡πÇ‡∏î‡∏¢‡∏™‡∏£‡∏∏‡∏õ‡πÅ‡∏•‡πâ‡∏ß partytown ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á main thread ‡πÅ‡∏•‡∏∞ web worker ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô synchronous ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà communication layer ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á main thread, web workers, service workers ‡πÅ‡∏•‡∏∞ 3rd-party scripts ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô web worker

‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤ partytown ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡∏Ñ‡∏∑‡∏≠ ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÜ ‡∏Ç‡∏≠‡∏á 3rd-party libraries ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡πÉ‡∏ä‡πâ ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏ä‡πâ web workers ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô ‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á main thread ‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠ main thread ‡∏à‡∏∞‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏õ execute script ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏¢‡∏≠‡∏∞‡∏Ç‡∏∂‡πâ‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏£‡∏≤‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô

## ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á partytown

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏° ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö `Astro` ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ integration ‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô

> [‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏µ‡πà Astro docs](https://docs.astro.build/en/guides/integrations-guide/partytown/)

```sh
npx astro add partytown
```

‡∏à‡∏∞‡∏°‡∏µ prompt ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÉ‡∏´‡πâ‡∏ï‡∏≠‡∏ö `yes` ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß `astro.config.js` ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢‡πÜ ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ

```js
import { defineConfig } from 'astro/config';
import partytown from '@astrojs/partytown';

export default defineConfig({
  // ...
  integrations: [partytown()],
});
```

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏´‡πâ partytown ‡∏à‡∏±‡∏ö event ‡∏Ç‡∏≠‡∏á `Google Tag Manager` ‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° config ‡πÑ‡∏õ‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ

```js
import { defineConfig } from 'astro/config';
import partytown from '@astrojs/partytown';

export default defineConfig({
  // ...
  integrations: [partytown({
    config: {
      forward: ['dataLayer.push'],
    },
  })],
});
```

> [‡∏î‡∏π‡∏Å‡∏≤‡∏£ config ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö services ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°](https://partytown.builder.io/common-services)

![screen shots 1](./partytown-screenshot-1.png)

<p style="text-align:center;">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏î‡∏π Console > Applications > Service Workers ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô partytown-sw.js registered ‡∏≠‡∏¢‡∏π‡πà</p>

‡∏ó‡∏µ‡∏ô‡∏µ‡πâ ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÄ‡∏≠‡∏≤ script ‡∏Ç‡∏≠‡∏á `Google Tag Manager` ‡πÑ‡∏õ‡πÅ‡∏õ‡∏∞‡πÉ‡∏ô layouts ‡∏´‡∏£‡∏∑‡∏≠ header ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÇ‡∏î‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° attribute ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ `type="text/partytown` ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢

```html
<!-- Google Tag Manager -->
<script
  type="text/partytown"
  src="https://www.googletagmanager.com/gtag/js?id={YOUR-GTAG-ID}"></script>
<script type="text/partytown">
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "{YOUR-GTAG-ID}");
</script>
```

‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢! üéâ ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏î‡πâ `Google Tag Manager` ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô web worker ‡πÅ‡∏•‡πâ‡∏ß ‡πÇ‡∏î‡∏¢‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å network ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ `proxytown` type ‡πÄ‡∏õ‡πá‡∏ô `xhr` ‡πÅ‡∏•‡∏∞ size ‡∏à‡∏∞‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ `ServiceWorker` ‡∏≠‡∏¢‡∏π‡πà ‡∏´‡∏≤‡∏Å‡πÄ‡∏£‡∏≤‡∏Å‡∏î‡∏î‡∏π payload ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô event ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏´‡πâ `Google Tag Manager` ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ track ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤

![screen shots 2](./partytown-screenshot-2.png)

<p style="text-align:center;">‡πÉ‡∏ô Console > Network ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô proxytown ‡∏ó‡∏µ‡πà type ‡πÄ‡∏õ‡πá‡∏ô xhr ‡πÄ‡∏û‡∏µ‡∏¢‡∏ö‡πÄ‡∏•‡∏¢ ‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å partytown ‡πÑ‡∏õ‡∏à‡∏±‡∏ö event ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤ config ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏´‡πâ web worker ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏ó‡∏ô</p>

## ‡∏™‡∏£‡∏∏‡∏õ

- ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ partytown ‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≤‡∏¢ 3rd-party script ‡πÑ‡∏õ‡∏£‡∏±‡∏ô‡∏ö‡∏ô web worker ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô
- ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏Å‡πÜ ‡∏Ç‡∏≠‡∏á 3rd-party libraries ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡πÉ‡∏ä‡πâ ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÉ‡∏ä‡πâ web workers ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô ‡∏•‡∏î‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á main thread ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ resource ‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô
- astro ‡∏°‡∏µ integration ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ setup ‡πÅ‡∏•‡∏∞ config ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏Å‡πÜ

## ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

[Trade-Offs](https://partytown.builder.io/trade-offs) ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ-‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢ ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á partytown ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö 3rd-party script ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡πà‡∏≤‡∏á‡πÜ

[Integration Guides](https://partytown.builder.io/integrations) ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ setup ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö framework ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÄ‡∏ä‡πà‡∏ô Astro, Nextjs, Html, Vue, Nuxtjs

[Forwarding Events](https://partytown.builder.io/forwarding-events) ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á partytown ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ forward event ‡πÑ‡∏õ‡πÉ‡∏´‡πâ web worker ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ó‡∏ô

‡∏Ç‡πâ‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ñ‡∏£‡∏±‡∏ö üéâ

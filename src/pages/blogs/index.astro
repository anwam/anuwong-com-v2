---
import { getCollection } from "astro:content";
import BlogItem from "@/modules/blog/components/BlogItem.astro";
import { SITE_TITLE } from "../../consts";
import BaseLayout from "../../layouts/BaseLayout.astro";

const title = `Blogs | ${SITE_TITLE}`;

const posts = (await getCollection("blog"))
  .filter((blog) => !blog.data.draft)
  .sort((a, b) => b.data?.date.valueOf() - a.data?.date.valueOf());
---

<BaseLayout title={title} description="A collection of blogs written by me.">
  <main class="container mx-auto mt-3 px-3 md:mt-4 md:px-0 lg:max-w-5xl">
    <section
      class="grid grid-cols-1 grid-rows-[repeat(4,_auto)] gap-4 md:grid-cols-3"
    >
      {
        posts.map((post, index) => (
          <BlogItem isFirst={index === 0} post={post} />
        ))
      }
    </section>
  </main>
</BaseLayout>
